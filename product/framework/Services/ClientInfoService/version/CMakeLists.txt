
include(GenerateAppVersionHeader)

set(APP_VERSION_HEADER_FOLDER ${UCF_CODE_GENERATOR_DIR}/AppVersion)
set(APP_VERSION_HEADER_FILE appVersion.h)
set(APP_VERSION_HEADER_PATH ${APP_VERSION_HEADER_FOLDER}/${APP_VERSION_HEADER_FILE})
generate_app_version_header(
    INPUT_JSON_FILE ${GLOBAL_APP_VERSION_JSON}
    INPUT_JSON_TARGET ${GLOBAL_APP_VERSION_JSON_TARGET}
    INPUT_VERSION_TEMPLATE ${CMAKE_CURRENT_SOURCE_DIR}/templates/appVersion.h.in
    OUTPUT_FILE ${APP_VERSION_HEADER_PATH}
    APP_VERSION_TARGET
)

include(BuildInterface)
BuildInterface(
    MODULE_NAME AppVersionHeader
    TARGET_SOURCE_HEADER_BASE_DIR ${APP_VERSION_HEADER_FOLDER}
    TARGET_SOURCE_PUBLIC_HEADER ${APP_VERSION_HEADER_PATH}
    TARGET_ADD_DEPENDENCIES ${APP_VERSION_TARGET}
    TARGET_INCLUDE_DIRECTORIES_BUILD_INTERFACE ${APP_VERSION_HEADER_FOLDER}
    TARGET_INCLUDE_DIRECTORIES_INSTALL_INTERFACE AppVersion
    IDE_FOLDER codegen
)
