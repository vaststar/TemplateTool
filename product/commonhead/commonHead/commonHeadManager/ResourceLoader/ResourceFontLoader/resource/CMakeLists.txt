include(TemplateTools)
include(CapitalizeString)
# 设置资源字符串 JSON 文件路径

set(RESOURCE_IDE_FOLDER commonhead/codegen)
set(RESOURCE_OUT_PUT_DIR ${UCF_CODE_GENERATOR_DIR}/ResourceFont)

set(RESOURCE_TARGETS )

## FontPalette
set(FONT_JSON_PATH ${CMAKE_CURRENT_SOURCE_DIR}/resource/palette.json)
set(FONT_OUT_PUT_FILE FontPaletteModel.h)
set(FONT_OUTPUT_PATH ${RESOURCE_OUT_PUT_DIR}/${FONT_OUT_PUT_FILE})
set(FONT_TEMEPLATE_FILE ${CMAKE_CURRENT_SOURCE_DIR}/templates/FontPaletteModel.h.j2)

generate_from_template(
    TEMPLATE_FILE ${FONT_TEMEPLATE_FILE}
    INPUT_FILE ${FONT_JSON_PATH}
    OUTPUT_FILE ${FONT_OUTPUT_PATH}
    FONT_TARGET
)
list(APPEND RESOURCE_TARGETS ${FONT_TARGET})

## FontToken
set(FONT_TOKEN_JSON_PATH ${CMAKE_CURRENT_SOURCE_DIR}/resource/token.json  CACHE STRING "Path to token.json")
set(TOKEN_OUT_PUT_FILE FontToken.h)
set(TOKEN_OUTPUT_PATH ${RESOURCE_OUT_PUT_DIR}/${TOKEN_OUT_PUT_FILE})
set(TOKEN_TEMEPLATE_FILE ${CMAKE_CURRENT_SOURCE_DIR}/templates/FontToken.h.j2)

generate_from_template(
    TEMPLATE_FILE ${TOKEN_TEMEPLATE_FILE}
    INPUT_FILE ${FONT_TOKEN_JSON_PATH}
    OUTPUT_FILE ${TOKEN_OUTPUT_PATH}
    TOKEN_TARGET
)
list(APPEND RESOURCE_TARGETS ${TOKEN_TARGET})


## BuildThemeFontSet
set(THEME_JSON_NAMES "normal" )
foreach(item IN LISTS THEME_JSON_NAMES)
set(THEME_JSON_PATH ${CMAKE_CURRENT_SOURCE_DIR}/resource/themes/${item}.json)
capitalize(${item} capital_json_name)
set(THEME_OUT_PUT_FILE Build${capital_json_name}ThemeFontSet.h)
set(THEME_OUTPUT_PATH ${RESOURCE_OUT_PUT_DIR}/${THEME_OUT_PUT_FILE})
set(THEME_TEMEPLATE_FILE ${CMAKE_CURRENT_SOURCE_DIR}/templates/BuildThemeFontSet.h.j2)

generate_from_template(
    TEMPLATE_FILE ${THEME_TEMEPLATE_FILE}
    INPUT_FILE ${THEME_JSON_PATH}
    OUTPUT_FILE ${THEME_OUTPUT_PATH}
    THEME_TARGET
)
list(APPEND RESOURCE_TARGETS ${THEME_TARGET})
endforeach()


include(BuildInterface)
BuildInterface(
    MODULE_NAME 
        ResourceFont
    TARGET_SOURCE_HEADER_BASE_DIR
        ${RESOURCE_OUT_PUT_DIR}
    TARGET_SOURCE_PUBLIC_HEADER
        ${RESOURCE_OUTPUT_PATH}
    TARGET_DEPENDENCIES_PUBLIC
        ResourceFontLoaderModel
    TARGET_INCLUDE_DIRECTORIES_BUILD_INTERFACE
        ${RESOURCE_OUT_PUT_DIR}
    TARGET_INCLUDE_DIRECTORIES_INSTALL_INTERFACE
        ResourceFont
    IDE_FOLDER
        ${RESOURCE_IDE_FOLDER}
)
add_dependencies(ResourceFont ${RESOURCE_TARGETS})

