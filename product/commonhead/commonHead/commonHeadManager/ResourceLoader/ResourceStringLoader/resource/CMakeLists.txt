include(TemplateTools)
# 设置资源字符串 JSON 文件路径
set(GLOBAL_RESOURCE_STRING_JSON_PATH ${CMAKE_CURRENT_SOURCE_DIR}/ResourceString.json CACHE STRING "Path to ResourceString.json")


set(RESOURCE_IDE_FOLDER commonhead/codegen)
set(RESOURCE_OUT_PUT_FILE ResourceString.h)
set(RESOURCE_OUT_PUT_DIR ${UCF_CODE_GENERATOR_DIR}/ResourceString)
set(RESOURCE_OUTPUT_PATH ${RESOURCE_OUT_PUT_DIR}/${RESOURCE_OUT_PUT_FILE})
set(RESOURCE_TEMEPLATE_FILE ${CMAKE_CURRENT_SOURCE_DIR}/templates/ResourceString.h.j2)

generate_from_template(
    TEMPLATE_FILE ${RESOURCE_TEMEPLATE_FILE}
    INPUT_FILE ${GLOBAL_RESOURCE_STRING_JSON_PATH}
    OUTPUT_FILE ${RESOURCE_OUTPUT_PATH}
    GFT_TARGET
)

include(BuildInterface)
BuildInterface(
    MODULE_NAME ResourceString
    TARGET_SOURCE_HEADER_BASE_DIR ${RESOURCE_OUT_PUT_DIR}
    TARGET_SOURCE_PUBLIC_HEADER ${RESOURCE_OUTPUT_PATH}
    TARGET_ADD_DEPENDENCIES ${GFT_TARGET}
    TARGET_INCLUDE_DIRECTORIES_BUILD_INTERFACE ${RESOURCE_OUT_PUT_DIR}
    TARGET_INCLUDE_DIRECTORIES_INSTALL_INTERFACE ResourceString
    IDE_FOLDER ${RESOURCE_IDE_FOLDER}
)
